# SpeedTyping

```commandline
javac -cp /home/knomm/Downloads/lanterna-3.0.1.jar -d out src/main/java/org/development/Main.java
java -cp /home/knomm/Downloads/lanterna-3.0.1.jar:out org.development.Main
```

HSQL commands:
* create users table
```hsqldb
CREATE TABLE IF NOT EXISTS TestUsers
(
    id            INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    login         VARCHAR(20) UNIQUE NOT NULL,
    register_date DATE DEFAULT CURRENT_DATE
);
```
`
* create statistics table
```hsqldb
CREATE TABLE IF NOT EXISTS TestStatistics
(
    id              UUID PRIMARY KEY,
    total_chars     INT    NOT NULL,
    total_words     INT    NOT NULL,
    incorrect_chars INT    NOT NULL,
    time            BIGINT NOT NULL,
    char_minute     INT    NOT NULL
)
```

* session_table
```hsqldb
CREATE TABLE IF NOT EXISTS TestSession
(
    id           INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    login_id     INT NOT NULL,
    statistic_id UUID NOT NULL,
    date         DATE DEFAULT CURRENT_DATE,
    time         TIME DEFAULT CURRENT_TIME,
    FOREIGN KEY (login_id) REFERENCES TestUsers (id),
    FOREIGN KEY (statistic_id) REFERENCES TestStatistics (id)
)
```
    
    
    
```hsqldb
INSERT INTO TestUsers (login)
VALUES ('tester');
```

```hsqldb
INSERT INTO TestStatistics
VALUES (UUID(), 0, 0, 0);
```


```hsqldb
INSERT INTO TestSession (login_id, statistic_id)
VALUES (1, 1);
```

https://chart-studio.plotly.com/create/#/

```hsqldb
SELECT U.LOGIN,
       AVG(ST.CHAR_MINUTE)                           as "chars/min",
       AVG(ST.CHAR_MINUTE) - AVG(ST.INCORRECT_CHARS) as "avg correct",
       S.time
FROM TESTSESSION S
         INNER JOIN TESTUSERS U on U.ID = S.LOGIN_ID
         INNER JOIN TESTSTATISTICS ST on ST.ID = S.STATISTIC_ID
WHERE U.LOGIN = 'username'
GROUP BY S.time, U.LOGIN;
```